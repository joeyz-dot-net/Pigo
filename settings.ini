[app]
music_dir = Z:
allowed_extensions = .mp3,.wav,.flac,.aac,.m4a
server_host = 0.0.0.0
server_port = 80
debug = true
mpv_cmd = c:\mpv\mpv.exe --input-ipc-server=\\.\pipe\mpv-pipe --idle=yes --force-window=no
default_stream_format = aac
local_search_max_results = 20
youtube_search_max_results = 20
local_volume = 10
stream_volume = 10
enable_stream = true

[paths]
; 外部工具路径配置
ffmpeg_path = ffmpeg
yt_dlp_path = yt-dlp
; 音频输入设备名称（Windows dshow 格式）
; 常见设备：CABLE Output (VB-Audio Virtual Cable), Stereo Mix 等
; 留空则自动检测
audio_input_device = CABLE Output (VB-Audio Virtual Cable)

[ffmpeg]
rtbufsize = 8M
thread_queue_size = 256
bufsize = 64K
segment_time = 10
max_delay = 5

[stream]
; 推流全局配置
keepalive_threshold = 2.0
keepalive_chunk_size = 128
broadcast_queue_maxsize = 8192
broadcast_executor_workers = 120

[formats]
; 音频格式配置 - 每种格式一行: format = codec,bitrate,profile,chunk_size,heartbeat,queue_multiplier
; 格式: 格式名=ffmpeg编码器,比特率,编码配置,块大小(KB),心跳间隔(秒),队列乘数
mp3 = libmp3lame,128k,,192,1.0,1.0
aac = aac,196k,aac_low,128,0.5,1.5
flac = flac,,,256,1.0,0.8

[browser_configs]
; 浏览器配置 - 格式: 浏览器=默认队列块数,心跳间隔(ms),超时(秒),保活包大小
safari = 512,50,20,512
chrome = 64,1000,40,128
firefox = 64,1000,40,128
edge = 64,1000,40,128

[browser_format_overrides]
; 浏览器×格式特定覆盖 - 格式: 浏览器_格式 = 队列块数,块大小(KB),超时(秒)
safari_mp3 = 512,192,20
safari_aac = 768,128,15
safari_flac = 256,256,20
chrome_mp3 = 64,192,40
chrome_aac = 96,128,35
chrome_flac = 32,256,40
firefox_mp3 = 64,192,40
firefox_aac = 96,128,35
firefox_flac = 32,256,40
edge_mp3 = 64,192,40
edge_aac = 96,128,35
edge_flac = 32,256,40

[logging]
; 日志级别: DEBUG, INFO, WARNING, ERROR, CRITICAL
level = INFO

; 按模块控制日志显示 (true=显示, false=隐藏)
module_stream = true
module_player = true
module_settings = true
module_app = true
module_uvicorn = true

; 按 API 路由过滤日志 (true=过滤/采样, false=完全显示)
route_status = true
route_stream_status = true
route_volume = false

; 高频路由采样率 (0.0-1.0, 如0.1=每10个中显示1个)
polling_sample_rate = 0.1

